name: API ETL pipeline

on:
    push:
         branches: 
            - main

jobs:
    read-from-api: 
        runs-on: ubuntu-latest
        
        steps: 
            - name: checkout code
              uses: actions/checkout@v2

            - name: setup python
              uses: actions/setup-python@v6
              with: 
                python-version: "3.10"
                
            - name: Install Dependencies
              run: pip install -r requirements.txt
              
            - name: get data from api
              env:
                API_TOKEN: ${{secrets.API_TOKEN}}
              run: python read_data_api.py  